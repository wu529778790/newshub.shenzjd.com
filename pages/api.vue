<template>
  <div class="min-h-screen bg-gradient-to-br from-base-100 via-base-50 to-base-100">
    <!-- å¤´éƒ¨ -->
    <header class="sticky top-0 z-50 bg-base-100/80 backdrop-blur-md border-b border-base-300/50">
      <div class="container mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
            <NuxtLink to="/" class="btn btn-ghost btn-sm">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
              </svg>
              è¿”å›é¦–é¡µ
            </NuxtLink>
            <div>
              <h1 class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                API æ–‡æ¡£
              </h1>
              <p class="text-xs text-base-content/60">
                æ‰€æœ‰å¯ç”¨çš„ API æ¥å£å’Œä½¿ç”¨è¯´æ˜
              </p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- ä¸»å†…å®¹ -->
    <main class="container mx-auto px-6 py-8">
      <!-- ç®€ä»‹å¡ç‰‡ -->
      <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
          <h2 class="card-title text-2xl">ğŸ“š API æ¥å£æ–‡æ¡£</h2>
          <p class="text-base-content/70 mt-2">
            æœ¬é¡¹ç›®æä¾› RESTful API æ¥å£ï¼Œæ”¯æŒå®æ—¶è·å–å„å¤§å¹³å°çš„çƒ­ç‚¹æ•°æ®ã€‚æ‰€æœ‰ API å‡è¿”å› JSON æ ¼å¼æ•°æ®ã€‚
          </p>
          <div class="badge badge-primary gap-2 mt-4">v1.0</div>
        </div>
      </div>

      <!-- API åˆ†ç±»ï¼šæ•°æ®æºç›¸å…³ -->
      <div class="mb-8">
        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span class="badge badge-primary badge-outline">æ•°æ®æº</span>
          Data Sources
        </h3>
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-4">
          <!-- /api/v1/sources -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/sources</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">è·å–æ‰€æœ‰æ•°æ®æºåˆ—è¡¨åŠå…¶é…ç½®ä¿¡æ¯</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">includeDisabled</code>
                  <span class="text-base-content/60">æ˜¯å¦åŒ…å«ç¦ç”¨çš„æº</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">metrics</code>
                  <span class="text-base-content/60">æ˜¯å¦åŒ…å«æ€§èƒ½æŒ‡æ ‡</span>
                </div>
              </div>

              <div class="divider my-2">è¯·æ±‚ç¤ºä¾‹</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>curl "https://your-site.com/api/v1/sources?metrics=true"</pre>
              </div>

              <div class="divider my-2">å“åº”ç¤ºä¾‹</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>{
  "apiVersion": "1.0",
  "timestamp": 1703980800000,
  "count": 27,
  "sources": [
    {
      "id": "weibo",
      "name": "å¾®åšçƒ­æœ",
      "home": "https://s.weibo.com",
      "type": "hot",
      "interval": 120,
      "enabled": true,
      "column": "china",
      "color": "#ff8200"
    }
  ]
}</pre>
              </div>
            </div>
          </div>

          <!-- /api/v1/sources/{id} -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/sources/[id]</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">è·å–å•ä¸ªæ•°æ®æºçš„è¯¦ç»†ä¿¡æ¯</p>

              <div class="divider my-2">è·¯å¾„å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">id</code>
                  <span class="text-base-content/60">æ•°æ®æºID (e.g., weibo, zhihu)</span>
                </div>
              </div>

              <div class="divider my-2">è¯·æ±‚ç¤ºä¾‹</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>curl "https://your-site.com/api/v1/sources/weibo"</pre>
              </div>
            </div>
          </div>

          <!-- /api/v1/batch -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/batch</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">æ‰¹é‡è·å–å¤šä¸ªæ•°æ®æºçš„æ•°æ®</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">sources</code>
                  <span class="text-base-content/60">é€—å·åˆ†éš”çš„æºID (å¿…å¡«)</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">force</code>
                  <span class="text-base-content/60">å¼ºåˆ¶åˆ·æ–°ç¼“å­˜</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">limit</code>
                  <span class="text-base-content/60">æ¯æºæ¡æ•°é™åˆ¶ (1-50)</span>
                </div>
              </div>

              <div class="divider my-2">è¯·æ±‚ç¤ºä¾‹</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>curl "https://your-site.com/api/v1/batch?sources=weibo,zhihu,baidu&limit=10"</pre>
              </div>
            </div>
          </div>

          <!-- /api/hot-list -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/hot-list</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">è·å–å•ä¸ªæ•°æ®æºçš„çƒ­ç‚¹æ•°æ®ï¼ˆæ—§ç‰ˆï¼‰</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">id</code>
                  <span class="text-base-content/60">æ•°æ®æºID (å¿…å¡«)</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">refresh</code>
                  <span class="text-base-content/60">å¼ºåˆ¶åˆ·æ–° (true/false)</span>
                </div>
              </div>

              <div class="divider my-2">è¯·æ±‚ç¤ºä¾‹</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>curl "https://your-site.com/api/hot-list?id=weibo&refresh=true"</pre>
              </div>
            </div>
          </div>

          <!-- /api/v1/sources/hot/batch -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/sources/hot/batch</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">çƒ­ç‚¹æ•°æ®æ‰¹é‡è·å–ï¼ˆå¸¦å¹¶å‘æ§åˆ¶ï¼‰</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">ids</code>
                  <span class="text-base-content/60">æºIDåˆ—è¡¨ (é€—å·åˆ†éš”)</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">concurrency</code>
                  <span class="text-base-content/60">å¹¶å‘æ•°é™åˆ¶</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">timeout</code>
                  <span class="text-base-content/60">è¶…æ—¶æ—¶é—´(ms)</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- API åˆ†ç±»ï¼šç³»ç»Ÿç›‘æ§ -->
      <div class="mb-8">
        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span class="badge badge-secondary badge-outline">ç³»ç»Ÿç›‘æ§</span>
          System Monitoring
        </h3>
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-4">
          <!-- /api/v1/health -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/health</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">ç³»ç»Ÿå¥åº·æ£€æŸ¥å’Œç›‘æ§æŒ‡æ ‡</p>

              <div class="divider my-2">åŠŸèƒ½è¯´æ˜</div>
              <ul class="text-xs text-base-content/70 space-y-1 list-disc list-inside">
                <li>ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼ˆhealthy/degraded/unhealthyï¼‰</li>
                <li>å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
                <li>Node.js ç‰ˆæœ¬å’Œè¿è¡Œæ—¶é—´</li>
                <li>æ‰€æœ‰æ•°æ®æºçš„å¥åº·çŠ¶æ€</li>
              </ul>

              <div class="divider my-2">è¯·æ±‚ç¤ºä¾‹</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>curl "https://your-site.com/api/v1/health"</pre>
              </div>
            </div>
          </div>

          <!-- /api/v1/metrics -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/metrics</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">è·å–ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">detailed</code>
                  <span class="text-base-content/60">æ˜¯å¦è¿”å›è¯¦ç»†æŒ‡æ ‡</span>
                </div>
              </div>

              <div class="divider my-2">åŒ…å«æŒ‡æ ‡</div>
              <ul class="text-xs text-base-content/70 space-y-1 list-disc list-inside">
                <li>è¯·æ±‚æ€»æ•°ã€é”™è¯¯ç‡ã€å¹³å‡å“åº”æ—¶é—´</li>
                <li>ç¼“å­˜å‘½ä¸­ç‡</li>
                <li>P95/P99 å“åº”æ—¶é—´</li>
                <li>å„æ•°æ®æºæˆåŠŸç‡å’Œè€—æ—¶</li>
              </ul>
            </div>
          </div>

          <!-- /api/v1/errors -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/errors</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">è·å–é”™è¯¯ç»Ÿè®¡ä¿¡æ¯</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">source</code>
                  <span class="text-base-content/60">æŒ‰æ•°æ®æºç­›é€‰</span>
                </div>
              </div>
            </div>
          </div>

          <!-- /api/v1/logs -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/logs</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—</p>
            </div>
          </div>
        </div>
      </div>

      <!-- API åˆ†ç±»ï¼šé«˜çº§åŠŸèƒ½ -->
      <div class="mb-8">
        <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
          <span class="badge badge-accent badge-outline">é«˜çº§åŠŸèƒ½</span>
          Advanced Features
        </h3>
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-4">
          <!-- /api/v1/stream -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/stream</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">æµå¼ API - é€æ­¥è¿”å›æ•°æ®</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">sources</code>
                  <span class="text-base-content/60">æºIDåˆ—è¡¨ (å¿…å¡«)</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">chunkSize</code>
                  <span class="text-base-content/60">æ¯æ‰¹æ¡ç›®æ•°</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">delay</code>
                  <span class="text-base-content/60">æ‰¹æ¬¡å»¶è¿Ÿ(ms)</span>
                </div>
              </div>

              <div class="divider my-2">å“åº”æ ¼å¼</div>
              <div class="mock mock-code bg-base-300 text-xs">
                <pre>{
  "type": "start|data|end|error",
  "sourceId": "weibo",
  "data": [...],
  "total": 20
}</pre>
              </div>
            </div>
          </div>

          <!-- /api/v1/optimized/batch -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/optimized/batch</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">ä¼˜åŒ–æ‰¹é‡ APIï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰</p>

              <div class="divider my-2">æŸ¥è¯¢å‚æ•°</div>
              <div class="text-xs space-y-1">
                <div class="flex gap-2">
                  <code class="badge badge-ghost">sources</code>
                  <span class="text-base-content/60">æºIDåˆ—è¡¨</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">priority</code>
                  <span class="text-base-content/60">ä¼˜å…ˆçº§æ’åº</span>
                </div>
                <div class="flex gap-2">
                  <code class="badge badge-ghost">concurrency</code>
                  <span class="text-base-content/60">å¹¶å‘æ•°</span>
                </div>
              </div>
            </div>
          </div>

          <!-- /api/v1/security/ip-whitelist -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/v1/security/ip-whitelist</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">IP ç™½åå•ç®¡ç†</p>
            </div>
          </div>

          <!-- /api/latest -->
          <div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow">
            <div class="card-body">
              <div class="flex items-center gap-2 mb-2">
                <span class="badge badge-success">GET</span>
                <code class="text-sm font-mono font-bold">/api/latest</code>
              </div>
              <p class="text-sm text-base-content/70 mb-3">ç‰ˆæœ¬ä¿¡æ¯</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ä½¿ç”¨æç¤º -->
      <div class="card bg-base-100 shadow-xl mt-8">
        <div class="card-body">
          <h3 class="card-title text-lg">ğŸ’¡ ä½¿ç”¨æç¤º</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 text-sm">
            <div class="alert alert-info">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span>æ‰€æœ‰ API å‡æ”¯æŒ CORSï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨è°ƒç”¨</span>
            </div>
            <div class="alert alert-success">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span>æ•°æ®è‡ªåŠ¨ç¼“å­˜ï¼Œä½¿ç”¨ ?force=1 å¼ºåˆ¶åˆ·æ–°</span>
            </div>
            <div class="alert alert-warning">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
              </svg>
              <span>éƒ¨åˆ†æºå¯èƒ½å› åçˆ¬è™«è€Œå¤±è´¥ï¼Œä¼šè‡ªåŠ¨é‡è¯•</span>
            </div>
            <div class="alert alert-warning">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span>å»ºè®®è®¾ç½® User-Agent é¿å…è¢«é™æµ</span>
            </div>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨ -->
      <div class="text-center mt-12 mb-8 text-base-content/50 text-sm">
        <p>éœ€è¦æ›´å¤šå¸®åŠ©ï¼ŸæŸ¥çœ‹é¡¹ç›®æ–‡æ¡£æˆ–è”ç³»å¼€å‘è€…</p>
        <NuxtLink to="/" class="link link-hover mt-2 inline-block">â† è¿”å›é¦–é¡µ</NuxtLink>
      </div>
    </main>
  </div>
</template>

<script setup>
useHead({
  title: 'API æ–‡æ¡£ - çƒ­æ¦œèšåˆ',
  meta: [
    {
      name: 'description',
      content: 'çƒ­æ¦œèšåˆ API æ¥å£æ–‡æ¡£ - æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„ API ç«¯ç‚¹å’Œä½¿ç”¨è¯´æ˜'
    }
  ]
})
</script>

<style scoped>
.mock-code {
  @apply p-3 rounded-lg overflow-x-auto;
}

.mock-code pre {
  @apply m-0 whitespace-pre-wrap break-words;
}

.card {
  @apply transition-all duration-200;
}

.card:hover {
  transform: translateY(-2px);
}
</style>
