# ğŸ”¥ NewsHub - çƒ­ç‚¹å†…å®¹èšåˆå™¨

ä¸€ä¸ªé«˜æ€§èƒ½çš„çƒ­ç‚¹å†…å®¹èšåˆå™¨ï¼Œä»å¤šä¸ªå¹³å°ï¼ˆå¾®åšã€çŸ¥ä¹ã€ç™¾åº¦ã€Bilibiliã€å°çº¢ä¹¦ã€è±†ç“£ç­‰ï¼‰æŠ“å–çƒ­é—¨æ•°æ®ï¼Œæä¾›ç»Ÿä¸€çš„æµè§ˆç•Œé¢ã€‚

![20251230211419](https://gcore.jsdelivr.net/gh/wu529778790/image/blog/20251230211419.png)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **å¤šå¹³å°èšåˆ**ï¼šæ”¯æŒ 40+ ä¸ªæ•°æ®æºï¼Œè¦†ç›–ä¸»æµç¤¾äº¤ã€æ–°é—»ã€ç§‘æŠ€å¹³å°
- **æ‹–æ‹½æ’åº**ï¼šè‡ªå®šä¹‰æ•°æ®æºæ˜¾ç¤ºé¡ºåºï¼Œä¿å­˜åˆ°æœ¬åœ°
- **å›¾ç‰‡åˆ†äº«**ï¼šä¸€é”®ç”Ÿæˆç²¾ç¾åˆ†äº«å›¾ï¼Œæ”¯æŒ Canvas è‡ªå®šä¹‰ç»˜åˆ¶
- **æ™ºèƒ½ç¼“å­˜**ï¼šå†…å­˜ç¼“å­˜ + è‡ªåŠ¨è¿‡æœŸï¼Œå‡å°‘ API è°ƒç”¨
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- **æ·±è‰²æ¨¡å¼**ï¼šæ”¯æŒä¸»é¢˜åˆ‡æ¢
- **RSS è®¢é˜…**ï¼šæ‰€æœ‰æ•°æ®æºæä¾› RSS æ ¼å¼è¾“å‡º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘

```bash
pnpm install
pnpm dev
# è®¿é—® http://localhost:3000
```

### Docker éƒ¨ç½²

```bash
# Docker Hub
docker run -p 3000:3000 wu529778790/newshub.shenzjd.com:latest

# GitHub Container Registry
docker run -p 3000:3000 ghcr.io/wu529778790/newshub.shenzjd.com:latest
```

### Docker Compose

```yaml
version: '3.8'
services:
  newshub:
    image: wu529778790/newshub.shenzjd.com:latest
    ports:
      - "3000:3000"
    restart: unless-stopped
```

```bash
docker-compose up -d
```

## ğŸ³ æ„å»ºä¸éƒ¨ç½²

### è‡ªåŠ¨æ„å»º

GitHub Actions ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨æ„å»º Docker é•œåƒï¼š
- æ¨é€åˆ° `main` åˆ†æ”¯ â†’ `latest` æ ‡ç­¾
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ â†’ ç‰ˆæœ¬å·æ ‡ç­¾

é•œåƒåŒæ—¶æ¨é€åˆ°ï¼š
- Docker Hub: `wu529778790/newshub.shenzjd.com`
- GHCR: `ghcr.io/wu529778790/newshub.shenzjd.com`

### æ‰‹åŠ¨æ„å»º

```bash
# æ„å»ºé•œåƒ
docker build -t newshub .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 newshub
```

## ğŸ“Š æ•°æ®æºåˆ—è¡¨ï¼ˆ40+ï¼‰

### ğŸ”¥ çƒ­ç‚¹å¹³å°
| å¹³å° | å­æº | åˆ·æ–°é¢‘ç‡ |
|------|------|----------|
| å¾®åš | å®æ—¶çƒ­æœ | 2 åˆ†é’Ÿ |
| çŸ¥ä¹ | çƒ­æ¦œ | 10 åˆ†é’Ÿ |
| ç™¾åº¦ | å®æ—¶æ¦œ | 10 åˆ†é’Ÿ |
| Bç«™ | çƒ­æœ/çƒ­é—¨è§†é¢‘/æ’è¡Œæ¦œ | 5 åˆ†é’Ÿ |
| æŠ–éŸ³ | çƒ­é—¨ | 10 åˆ†é’Ÿ |
| è™æ‰‘ | ä¸»å¹²é“ | 10 åˆ†é’Ÿ |
| è´´å§ | çƒ­è®® | 10 åˆ†é’Ÿ |
| ä»Šæ—¥å¤´æ¡ | çƒ­ç‚¹ | 10 åˆ†é’Ÿ |
| å°çº¢ä¹¦ | çƒ­é—¨ | 10 åˆ†é’Ÿ |
| è±†ç“£ | ç”µå½±/å›¾ä¹¦/éŸ³ä¹ | 30 åˆ†é’Ÿ |
| Twitter | çƒ­é—¨è¶‹åŠ¿ | 30 åˆ†é’Ÿ |
| Google Trends | çƒ­é—¨æœç´¢ | 30 åˆ†é’Ÿ |

### ğŸ“° æ–°é—»åª’ä½“
| å¹³å° | åˆ·æ–°é¢‘ç‡ |
|------|----------|
| æ¾æ¹ƒæ–°é—» | 30 åˆ†é’Ÿ |
| å‚è€ƒæ¶ˆæ¯ | 30 åˆ†é’Ÿ |
| å«æ˜Ÿé€šè®¯ç¤¾ | 30 åˆ†é’Ÿ |
| å‡¤å‡°ç½‘ | 10 åˆ†é’Ÿ |
| BBC News | 30 åˆ†é’Ÿ |

### ğŸ’° é‡‘èè´¢ç»
| å¹³å° | å­æº | åˆ·æ–°é¢‘ç‡ |
|------|------|----------|
| é›ªçƒ | çƒ­é—¨è‚¡ç¥¨ | 2 åˆ†é’Ÿ |
| æ ¼éš†æ±‡ | å®æ—¶äº‹ä»¶ | 2 åˆ†é’Ÿ |
| åå°”è¡—è§é—» | çƒ­é—¨/æ–°é—» | 30 åˆ†é’Ÿ |
| æ³•å¸ƒè´¢ç» | æ–°é—»å¤´æ¡ | 30 åˆ†é’Ÿ |
| é‡‘åæ•°æ® | å®æ—¶ | 5 åˆ†é’Ÿ |
| ä¸œæ–¹è´¢å¯Œ | çƒ­ç‚¹ | 10 åˆ†é’Ÿ |

### ğŸ’» ç§‘æŠ€å¼€å‘
| å¹³å° | åˆ·æ–°é¢‘ç‡ |
|------|----------|
| GitHub Trending | 30 åˆ†é’Ÿ |
| Hacker News | 30 åˆ†é’Ÿ |
| Product Hunt | 30 åˆ†é’Ÿ |
| Solidot | 60 åˆ†é’Ÿ |
| å°‘æ•°æ´¾ | 30 åˆ†é’Ÿ |
| ç¨€åœŸæ˜é‡‘ | 30 åˆ†é’Ÿ |
| ITä¹‹å®¶ | 5 åˆ†é’Ÿ |
| 36æ°ª | 5 åˆ†é’Ÿ |

### ğŸ¯ ç¤¾åŒºè®ºå›
| å¹³å° | å­æº | åˆ·æ–°é¢‘ç‡ |
|------|------|----------|
| V2EX | åˆ†äº«/çƒ­é—¨ | 30 åˆ†é’Ÿ |
| è¿œæ™¯è®ºå› | Win11 | 5 åˆ†é’Ÿ |

### ğŸ¬ å¨±ä¹ç”Ÿæ´»
| å¹³å° | åˆ·æ–°é¢‘ç‡ |
|------|----------|
| é…·å®‰ | 30 åˆ†é’Ÿ |
| å¿«æ‰‹ | 10 åˆ†é’Ÿ |

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
pnpm dev          # å¼€å‘æ¨¡å¼ï¼ˆhttp://localhost:3000ï¼‰
pnpm build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm preview      # é¢„è§ˆç”Ÿäº§æ„å»º
pnpm type-check   # TypeScript ç±»å‹æ£€æŸ¥
pnpm generate     # ç”Ÿæˆé™æ€ç«™ç‚¹
```

## ğŸ” API ç«¯ç‚¹

```bash
# è·å–çƒ­ç‚¹æ•°æ®
GET /api/hot/{source}          # ä¾‹å¦‚: /api/hot/baidu
GET /api/hot/{source}?force=1  # å¼ºåˆ¶åˆ·æ–°ç¼“å­˜

# ç”Ÿæˆåˆ†äº«å›¾ç‰‡
GET /api/image/{source}        # ç”Ÿæˆçƒ­ç‚¹åˆ—è¡¨å›¾ç‰‡

# RSS è®¢é˜…
GET /api/rss/{source}          # RSS æ ¼å¼æ•°æ®
GET /api/rss/{source}?limit=10 # é™åˆ¶æ•°é‡
```

## ğŸ³ Docker æ„å»ºä¸éƒ¨ç½²

### GitHub Actions è‡ªåŠ¨æ„å»º

é¡¹ç›®é…ç½®äº†å®Œæ•´çš„ CI/CD æµç¨‹ï¼š

```yaml
# .github/workflows/docker-publish.yml
on:
  push:
    branches: [main]
    tags: ['v*']
  workflow_dispatch:
```

**æ„å»ºæµç¨‹ï¼š**
1. æ¨é€ä»£ç åˆ° `main` åˆ†æ”¯æˆ–åˆ›å»ºæ ‡ç­¾
2. è‡ªåŠ¨æ„å»ºå¤šå¹³å°é•œåƒï¼ˆlinux/amd64ï¼‰
3. åŒæ—¶æ¨é€åˆ° Docker Hub å’Œ GHCR
4. ä½¿ç”¨æ„å»ºç¼“å­˜åŠ é€Ÿåç»­æ„å»º

**é•œåƒä»“åº“ï¼š**
- Docker Hub: `docker.io/wu529778790/newshub.shenzjd.com`
- GHCR: `ghcr.io/wu529778790/newshub.shenzjd.com`

### Dockerfile ç‰¹ç‚¹

- **å•é˜¶æ®µæ„å»º**ï¼šç®€åŒ–æ„å»ºè¿‡ç¨‹ï¼Œå‡å°‘é•œåƒä½“ç§¯
- **é™æ€æ–‡ä»¶æœåŠ¡**ï¼šå†…ç½® `start.mjs` å¤„ç†é™æ€èµ„æº
- **ç«¯å£ 3000**ï¼šé»˜è®¤ç›‘å¬ 3000 ç«¯å£

### éƒ¨ç½²ç¤ºä¾‹

```bash
# å¿«é€Ÿå¯åŠ¨
docker run -d -p 3000:3000 \
  --name newshub \
  --restart unless-stopped \
  wu529778790/newshub.shenzjd.com:latest

# ä½¿ç”¨ç¯å¢ƒå˜é‡
docker run -d -p 3000:3000 \
  -e CACHE_DURATION=600000 \
  -e HOST=0.0.0.0 \
  wu529778790/newshub.shenzjd.com:latest

# Docker Compose
docker-compose up -d
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ•°æ®æº

1. åœ¨ `server/sources/` åˆ›å»ºæ–‡ä»¶ï¼š
```typescript
// server/sources/new-platform.ts
export default defineSource({
  'new-platform': async () => {
    // å®ç°æŠ“å–é€»è¾‘
    return [{
      id: 'unique-id',
      title: 'æ ‡é¢˜',
      url: 'https://example.com',
      extra: { info: 'é™„åŠ ä¿¡æ¯' }
    }];
  }
});
```

2. åœ¨ `server/services/sources.ts` æ·»åŠ é…ç½®ï¼š
```typescript
{
  id: 'new-platform',
  name: 'æ–°å¹³å°',
  home: 'https://example.com'
}
```

3. åœ¨ `server/services/hot-list.service.ts` æ³¨å†Œï¼š
```typescript
import getNewPlatformList from '~/server/sources/new-platform';

const fetcherMap = {
  'new-platform': getNewPlatformList['new-platform']!,
  // ...
};
```

### è°ƒè¯•å·¥å…·

```bash
# æŸ¥çœ‹åŸå§‹æ•°æ®
curl http://localhost:3000/api/hot/baidu

# ç”Ÿæˆå›¾ç‰‡
curl http://localhost:3000/api/image/baidu -o test.png

# å¼ºåˆ¶åˆ·æ–°ç¼“å­˜
curl http://localhost:3000/api/hot/baidu?force=1

# RSS æ ¼å¼
curl http://localhost:3000/api/rss/baidu
```

## ğŸ“ ç¯å¢ƒå˜é‡

```bash
# .env (å¯é€‰)
CACHE_DURATION=600000    # ç¼“å­˜æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 10 åˆ†é’Ÿ
MAX_RETRIES=3            # è¯·æ±‚é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ 3
HOST=0.0.0.0             # æœåŠ¡åœ°å€ï¼Œé»˜è®¤ 0.0.0.0
PORT=3000                # æœåŠ¡ç«¯å£ï¼Œé»˜è®¤ 3000
```

## ğŸ¯ æ ¸å¿ƒæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å‰ç«¯ (Nuxt 4 + Vue 3)          â”‚
â”‚  - æ‹–æ‹½æ’åº (localStorage)              â”‚
â”‚  - æ‡’åŠ è½½ (IntersectionObserver)        â”‚
â”‚  - å›¾ç‰‡ç”Ÿæˆ (Canvas/HTML2Canvas)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        åç«¯ API (Nitro Server)           â”‚
â”‚  - /api/hot/{source}                    â”‚
â”‚  - /api/image/{source}                  â”‚
â”‚  - /api/rss/{source}                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®æŠ“å–å±‚ (server/sources/)        â”‚
â”‚  - myFetch() å¸¦ç¼“å­˜å’Œé‡è¯•               â”‚
â”‚  - HTML è§£æ (cheerio)                  â”‚
â”‚  - RSS/JSON å¤„ç†                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ç¼“å­˜ç³»ç»Ÿ (å†…å­˜/æŒä¹…åŒ–)           â”‚
â”‚  - è‡ªåŠ¨è¿‡æœŸ                             â”‚
â”‚  - èŠ‚æµæ§åˆ¶                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

1. **å¹¶è¡Œè¯·æ±‚**ï¼šæ‰€æœ‰æ•°æ®æºåŒæ—¶æŠ“å–
2. **æ™ºèƒ½ç¼“å­˜**ï¼šé¿å…é‡å¤è¯·æ±‚ï¼Œå‡å°‘æºç«™å‹åŠ›
3. **æ‡’åŠ è½½**ï¼šå›¾ç‰‡æŒ‰éœ€åŠ è½½
4. **æœåŠ¡ç«¯æ¸²æŸ“**ï¼šé¦–å±å¿«é€Ÿå±•ç¤º
5. **é”™è¯¯éš”ç¦»**ï¼šå•æºå¤±è´¥ä¸å½±å“å…¶ä»–æº

## ğŸ“„ è®¸å¯è¯

MIT
